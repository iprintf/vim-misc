
GearmanWorker::work

(PECL gearman >= 0.5.0)

GearmanWorker::work — Wait for and perform jobs

说明

public bool GearmanWorker::work ( void )

Waits for a job to be assigned and then calls the appropriate callback
function. Issues an E_WARNING with the last Gearman error if the return code is
not one of GEARMAN_SUCCESS, GEARMAN_IO_WAIT, or GEARMAN_WORK_FAIL.

参数

此函数没有参数。

返回值

成功时返回 TRUE，或者在失败时返回 FALSE。

范例

Example #1 GearmanWorker::work() example

<?php

# create the worker
$worker = new GearmanWorker(); 

# add the default job server (localhost)
$worker->addServer(); 

# add the reverse function
$worker->addFunction("reverse", "my_reverse_function"); 

# start te worker listening for job submissions
while ($worker->work()); 
 
function my_reverse_function($job) 
{ 
  return strrev($job->workload()); 
}

?>

参见

  • GearmanWorker::addFunction() - Register and add callback function

