
mysqli::$connect_errno

mysqli_connect_errno

(PHP 5, PHP 7)

mysqli::$connect_errno -- mysqli_connect_errno — Returns the error code from
last connect call

说明

面向对象风格

int $mysqli->connect_errno;

过程化风格

int mysqli_connect_errno ( void )

Returns the last error code number from the last call to mysqli_connect().

    Note:

    Client error message numbers are listed in the MySQL errmsg.h header file,
    server error message numbers are listed in mysqld_error.h. In the MySQL
    source distribution you can find a complete list of error messages and
    error numbers in the file Docs/mysqld_error.txt.

返回值

An error code value for the last call to mysqli_connect(), if it failed. zero
means no error occurred.

范例

Example #1 $mysqli->connect_errno example

面向对象风格

<?php
$mysqli = @new mysqli('localhost', 'fake_user', 'my_password', 'my_db');

if ($mysqli->connect_errno) {
    die('Connect Error: ' . $mysqli->connect_errno);
}
?>

过程化风格

<?php
$link = @mysqli_connect('localhost', 'fake_user', 'my_password', 'my_db');

if (!$link) {
    die('Connect Error: ' . mysqli_connect_errno());
}
?>

以上例程会输出：

Connect Error: 1045

参见

  • mysqli_connect() - 别名 mysqli::__construct
  • mysqli_connect_error() - Returns a string description of the last connect
    error
  • mysqli_errno() - 返回最近函数调用的错误代码
  • mysqli_error() - Returns a string description of the last error
  • mysqli_sqlstate() - Returns the SQLSTATE error from previous MySQL
    operation


User Contributed Notes 2 notes

===============================================================================

'errmsg.h' and 'mysqld_error.h' files only have the definitions of the error
codes. In the MySQL documentation you can find the definition along with the
message it displays, which could be more useful since the error constant name
isn't always explicit enough.

Client Error Codes and Messages
http://dev.mysql.com/doc/refman/5.6/en/error-messages-client.html

Server Error Codes and Messages
http://dev.mysql.com/doc/refman/5.6/en/error-messages-server.html
===============================================================================

As of 5.5.9, connect_errno will not show an error if the host or the user (or
both) are empty strings, so such cases have to be accounted for separately.
