
Imagick::valid

(PECL imagick 2.0.0)

Imagick::valid — Checks if the current item is valid

说明

bool Imagick::valid ( void )

Checks if the current item is valid.

返回值

成功时返回 TRUE。


User Contributed Notes 1 note

===============================================================================

We found this method to be of value when checking most image file types.
However, it does not appear to be rigorous enough to detect corrupt jpg files.
We use the following for jpgs and validate() for everything else.

<?php
    // check for the existence of the EOI segment header at the end of the file
    if (0 !== fseek($file, -2, SEEK_END) || "\xFF\xD9" !== fread($file, 2)) {
        fclose($file);
        return FALSE;
    }
?>
