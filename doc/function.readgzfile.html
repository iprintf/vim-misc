
readgzfile

(PHP 4, PHP 5, PHP 7)

readgzfile — Output a gz-file

说明

int readgzfile ( string $filename [, int $use_include_path = 0 ] )

Reads a file, decompresses it and writes it to standard output.

readgzfile() can be used to read a file which is not in gzip format; in this
case readgzfile() will directly read from the file without decompression.

参数

filename

    The file name. This file will be opened from the filesystem and its
    contents written to standard output.

use_include_path

    You can set this optional parameter to 1, if you want to search for the
    file in the include_path too.

返回值

Returns the number of (uncompressed) bytes read from the file. If an error
occurs, FALSE is returned and unless the function was called as @readgzfile, an
error message is printed.

参见

  • gzpassthru() - Output all remaining data on a gz-file pointer
  • gzfile() - Read entire gz-file into an array
  • gzopen() - Open gz-file


User Contributed Notes 1 note

===============================================================================

This is a rather simple example of usage for this function, but it does work,
and it solved a problem I was using with old browsers accessing gzipped files.

<?PHP

// first we need to stop the server from sending any headers at all. 
ob_start();

readgzfile("test.html.gz"); // read the file and output directly to
the browser
                                      // non compressed data from the
file

ob_end_flush(); // let the headers go// 

?>

There is no need for any html formating if the source file is an HTML formated
page, such as the ones I'm using are. Checking the browser version, sends
either the gzip file directly, or sends the browser to a page like this, which
does the work for it. Well done simple function.

My server is running PHP 4.2.2 on Linux Redhat version 9 and
Apache 2.0.40
