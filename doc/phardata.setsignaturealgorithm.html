
Phar::setSignatureAlgorithm

(PHP >= 5.3.0, PECL phar >= 1.1.0)

Phar::setSignatureAlgorithm — set the signature algorithm for a phar and apply
it.

说明

public void Phar::setSignatureAlgorithm ( int $sigtype )


    Note:

    此方法需要将 php.ini 中的 phar.readonly 设为 0 以适合 Phar 对象. 否则, 将抛
    出PharException.

Set the signature algorithm for a phar and apply it. The signature algorithm
must be one of Phar::MD5, Phar::SHA1, Phar::SHA256, Phar::SHA512, or Phar::PGP
(pgp not yet supported and falls back to SHA-1).

参数

sigtype

    One of Phar::MD5, Phar::SHA1, Phar::SHA256, Phar::SHA512, or Phar::PGP

返回值

没有返回值。

错误／异常

Throws UnexpectedValueException for many errors, BadMethodCallException if
called for a zip- or a tar-based phar archive, and a PharException if any
problems occur flushing changes to disk.

参见

  • Phar::getSupportedSignatures() - Return array of supported signature types
  • Phar::getSignature() - Return MD5/SHA1/SHA256/SHA512/OpenSSL signature of a
    Phar archive


User Contributed Notes 1 note

===============================================================================

As a note, the docs don't show the (optional) second parameter nor mention the
existence of the Phar::OPENSSL class constant also available for use with this
method.

To sign a phar with OpenSSL, for example...

<?php

$phar = new Phar('somephar.phar');
// ... add your files and such
$phar->setSignatureAlgorithm(Phar::OPENSSL, file_get_contents(
'private_key_here.pem'));
// ... do whatever else you want afterwards here ...
?>

Hope this proves useful to someone.
