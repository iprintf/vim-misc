
SyncSemaphore::lock

(PECL sync >= 1.0.0)

SyncSemaphore::lock — Decreases the count of the semaphore or waits

说明

public bool SyncSemaphore::lock ([ integer $wait ] )

Decreases the count of a SyncSemaphore object or waits until the semaphore
becomes non-zero.

参数

wait

    The number of milliseconds to wait for the semaphore. A value of -1 is
    infinite.

返回值

A boolean of TRUE if the lock operation was successful, FALSE otherwise.

范例

Example #1 SyncSemaphore::lock() example

<?php
$semaphore = new SyncSemaphore("LimitedResource_2clients", 2);

if (!$semaphore->lock(3000))
{
    echo "Unable to lock semaphore.";

    exit();
}

/* ... */

$semaphore->unlock();
?>

参见

  • SyncSemaphore::unlock() - Increases the count of the semaphore

