
MongoCollection::setReadPreference

(PECL mongo >=1.3.0)

MongoCollection::setReadPreference — Set the read preference for this
collection

说明

public bool MongoCollection::setReadPreference ( string $read_preference [, 
array $tags ] )

参数

read_preference

    The read preference mode: MongoClient::RP_PRIMARY,
    MongoClient::RP_PRIMARY_PREFERRED, MongoClient::RP_SECONDARY,
    MongoClient::RP_SECONDARY_PREFERRED, or MongoClient::RP_NEAREST.

tags

    An array of zero or more tag sets, where each tag set is itself an array of
    criteria used to match tags on replica set members.

返回值

Returns TRUE on success, or FALSE otherwise.

错误／异常

Emits E_WARNING if either parameter is invalid, or if one or more tag sets are
provided with the MongoClient::RP_PRIMARY read preference mode.

范例

Example #1 MongoCollection::setReadPreference() tag set array syntax example

<?php

$m = new MongoClient();
$c = $m->test->users;

// Prefer the nearest server in the "east" data center also used for reporting,
// but fall back to a server in the "west" data center
$c->setReadPreference(MongoClient::RP_NEAREST, array(
    array('dc' => 'east', 'use' => 'reporting'),
    array('dc' => 'west'),
));
?>

参见

  • The read preferences documentation.
  • MongoCollection::getReadPreference() - Get the read preference for this
    collection

