
RarArchive::isBroken

rar_broken_is

(PECL rar >= 3.0.0)

RarArchive::isBroken -- rar_broken_is — Test whether an archive is broken
(incomplete)

说明

面向对象风格 (method):

public bool RarArchive::isBroken ( void )

过程化风格:

bool rar_broken_is ( RarArchive $rarfile )

This function determines whether an archive is incomplete, i.e., if a volume is
missing or a volume is truncated.

参数

rarfile

    A RarArchive object, opened with rar_open().

返回值

Returns TRUE if the archive is broken, FALSE otherwise. This function may also
return FALSE if the passed file has already been closed. The only way to tell
the two cases apart is to enable exceptions with 
RarException::setUsingExceptions(); however, this should be unnecessary as a
program should not operate on closed files.

范例

Example #1 面向对象风格

<?php
function retnull() { return null; }
$file = dirname(__FILE__) . "/multi_broken.part1.rar";
/* Third argument is used to omit notice */
$arch = RarArchive::open($file, null, 'retnull');
var_dump($arch->isBroken());
?>

以上例程的输出类似于：

bool(true)

Example #2 过程化风格

<?php
function retnull() { return null; }
$file = dirname(__FILE__) . "/multi_broken.part1.rar";
/* Third argument is used to omit notice */
$arch = rar_open($file, null, 'retnull');
var_dump(rar_broken_is($arch));
?>

参见

  • RarArchive::setAllowBroken() - Whether opening broken archives is allowed

