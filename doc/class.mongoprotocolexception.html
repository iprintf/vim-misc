
The MongoProtocolException class

(PECL mongo >= 1.5.0)

简介

When talking to MongoDB 2.6.0, and later, certain operations (such as writes)
may throw MongoProtocolException when the response from the server did not make
sense - for example during network failure (we could read the entire response)
or data corruption.

This exception is also thrown when attempting to talk newer protocols then the
server supports, for example using the MongoWriteBatch when talking to a
MongoDB server prior to 2.6.0.

类摘要

MongoProtocolException extends MongoException {
/* 继承的属性 */
protected string $message ;
protected int $code ;
protected string $file ;
protected int $line ;
}

范例

Example #1 Catching MongoProtocolException

Running the following example against MongoDB prior to 2.6.0 will throw an
MongoProtocolException

<?php
$mc = new MongoClient("localhost");
$c = $mc->selectCollection("test", "test");

try {
    $batch = new MongoInsertBatch($c);
} catch(MongoProtocolException $e) {
    echo $e->getMessage();
}
?>

以上例程的输出类似于：

Current primary does not have a Write API

