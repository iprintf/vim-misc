
MongoWriteBatch::__construct

(PECL mongo >= 1.5.0)

MongoWriteBatch::__construct — Creates a new batch of write operations

Description

protected MongoWriteBatch::__construct ( MongoCollection $collection [, string
$batch_type [, array $write_options ]] )

Constructs a new MongoWriteBatch.

    Note:

    This is a protected constructor. Please use one of the classes inheriting
    MongoWriteBatch.

Parameters

collection

    The MongoCollection to execute the batch on. Its write concern will be
    copied and used as the default write concern if none is given as
    $write_options or during MongoWriteBatch::execute().

batch_type

    One of:
      □ 0 - make an MongoWriteBatch::COMMAND_INSERT batch
      □ 1 - make an MongoWriteBatch::COMMAND_UPDATE batch
      □ 2 - make a MongoWriteBatch::COMMAND_DELETE batch

write_options

    An array of Write Options.

      key                              value meaning
    w (int|  Write concern value
    string)
    wtimeout Maximum time to wait for replication
    (int)
             Determines if MongoDB must apply this batch in order. Ordered
             writes execute serially (i.e. one at a time) and execution will
    ordered  stop after the first error. Unordered writes may execute in
             parallel and execution will not stop after the first error.
             Defaults to TRUE
    j (bool) Wait for journaling on the primary. This value is discouraged, use
             WriteConcern instead
    fsync    Wait for fsync on the primary. This value is discouraged, use
    (bool)   WriteConcern instead

Return Values

A new MongoWriteBatch of type batch_type.

See Also

  • MongoInsertBatch
  • MongoUpdateBatch
  • MongoDeleteBatch

