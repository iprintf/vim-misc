
Memcached::decrement

(PECL memcached >= 0.1.0)

Memcached::decrement — 减小数值元素的值

说明

public int Memcached::decrement ( string $key [, int $offset = 1 ] )

Memcached::decrement()减小一个数值元素的值，减小多少由参数offset决定。如果元素
的值不是数值，以0值对待。如果减小后的值小于0,则新的值被设置为0.如果元素不存在，
Memcached::decrement() 失败。

参数

key

    将要减小值的元素的key。

offset

    要将减小指定元素的值减小多少。

返回值

成功时返回元素新的值，或者在失败时返回 FALSE。如果key不存在，
Memcached::getResultCode()返回Memcached::RES_NOTFOUND。

范例

Example #1 Memcached::decrement() 示例

<?php
$m = new Memcached();
$m->addServer('localhost', 11211);

$m->set('counter', 5);
$m->decrement('counter');
var_dump($m->get('counter'));

$m->decrement('counter', 10);
var_dump($m->get('counter'));
?>

以上例程会输出：

int(4)
int(0)

参见

  • Memcached::increment() - 增加数值元素的值


User Contributed Notes 3 notes

===============================================================================

decrement will not change TTL of the stored key/value.
===============================================================================

Found possible bug :
decrement fails and returns -1  when memcached::OPT_BINARY_PROTOCOL is set to
true.

tested on PECL Memcached 2.1.0 and libmemcached version 1.0.8
===============================================================================

PECL memcached < 0.2.0

public int Memcached::decrement ( string $key [, int $offset = 1 ] )
