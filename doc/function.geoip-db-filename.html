
geoip_db_filename

(PECL geoip >= 1.0.1)

geoip_db_filename — Returns the filename of the corresponding GeoIP Database

说明

string geoip_db_filename ( int $database )

The geoip_db_filename() function returns the filename of the corresponding
GeoIP Database.

It does not indicate if the file exists or not on disk, only where the library
is looking for the database.

参数

database

    The database type as an integer. You can use the various constants defined
    with this extension (ie: GEOIP_*_EDITION).

返回值

Returns the filename of the corresponding database, or NULL on error.

范例

Example #1 A geoip_db_filename() example

This will output the filename of the corresponding database.

<?php

print geoip_db_filename(GEOIP_COUNTRY_EDITION);

?>

以上例程会输出：

/usr/share/GeoIP/GeoIP.dat


User Contributed Notes 1 note

===============================================================================

To quickly know which databases are available on your system:

<?php
$cst = array(
             'GEOIP_COUNTRY_EDITION' => GEOIP_COUNTRY_EDITION,
             'GEOIP_REGION_EDITION_REV0' => GEOIP_REGION_EDITION_REV0,
             'GEOIP_CITY_EDITION_REV0' => GEOIP_CITY_EDITION_REV0,
             'GEOIP_ORG_EDITION' => GEOIP_ORG_EDITION,
             'GEOIP_ISP_EDITION' => GEOIP_ISP_EDITION,
             'GEOIP_CITY_EDITION_REV1' => GEOIP_CITY_EDITION_REV1,
             'GEOIP_REGION_EDITION_REV1' => GEOIP_REGION_EDITION_REV1,
             'GEOIP_PROXY_EDITION' => GEOIP_PROXY_EDITION,
             'GEOIP_ASNUM_EDITION' => GEOIP_ASNUM_EDITION,
             'GEOIP_NETSPEED_EDITION' => GEOIP_NETSPEED_EDITION,
             'GEOIP_DOMAIN_EDITION' => GEOIP_DOMAIN_EDITION,
             );

foreach ($cst as $k=>$v) {
    echo $k.': '.geoip_db_filename($v).'  '.(geoip_db_avail($v) ? 'Available':
'').'<br>';
}
?>

The only drawback of the PECL extension with respect to a pure PHP
implementation is that you cannot select yourself where the database is. So, if
you get a new version of the database, you need to put in the standard place
and you may need root access to do so.
