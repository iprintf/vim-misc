
MongoCollection::getReadPreference

(PECL mongo >=1.3.0)

MongoCollection::getReadPreference — Get the read preference for this
collection

说明

public array MongoCollection::getReadPreference ( void )

参数

此函数没有参数。

返回值

This function returns an array describing the read preference. The array
contains the values type for the string read preference mode (corresponding to
the MongoClient constants), and tagsets containing a list of all tag set
criteria. If no tag sets were specified, tagsets will not be present in the
array.

更新日志

版本                                    说明
      The return value has changed to be consistent with 
1.3.3 MongoCollection::setReadPreference(). The type value was changed from a
      number to a string, type_string was removed, and tagsets now expresses
      tags as key/value pairs instead of colon-delimited strings.

范例

Example #1 MongoCollection::getReadPreference() return value example

<?php

$m = new MongoClient();
$c = $m->test->users;
$c->setReadPreference(MongoClient::RP_SECONDARY, array(
    array('dc' => 'east', 'use' => 'reporting'),
    array('dc' => 'west'),
    array(),
));
var_dump($c->getReadPreference());
?>

以上例程会输出：

array(2) {
  ["type"]=>
  string(9) "secondary"
  ["tagsets"]=>
  array(3) {
    [0]=>
    array(2) {
      ["dc"]=>
      string(4) "east"
      ["use"]=>
      string(9) "reporting"
    }
    [1]=>
    array(1) {
      ["dc"]=>
      string(7) "west"
    }
    [2]=>
    array(0) {
    }
  }
}

参见

  • The read preferences documentation.
  • MongoCollection::setReadPreference() - Set the read preference for this
    collection

