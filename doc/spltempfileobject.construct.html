
SplTempFileObject::__construct

(PHP 5 >= 5.1.2, PHP 7)

SplTempFileObject::__construct — Construct a new temporary file object

说明

public SplTempFileObject::__construct ([ int $max_memory ] )

Construct a new temporary file object.

参数

max_memory

    The maximum amount of memory (in bytes, default is 2 MB) for the temporary
    file to use. If the temporary file exceeds this size, it will be moved to a
    file in the system's temp directory.

    If max_memory is negative, only memory will be used. If max_memory is zero,
    no memory will be used.

返回值

没有返回值。

错误／异常

Throws a RuntimeException if an error occurs.

范例

Example #1 SplTempFileObject() example

This example writes a temporary file in memory which can be written to and read
from.

<?php
$temp = new SplTempFileObject();
$temp->fwrite("This is the first line\n");
$temp->fwrite("And this is the second.\n");
echo "Written " . $temp->ftell() . " bytes to temporary file.\n\n";

// Rewind and read what was written
$temp->rewind();
foreach ($temp as $line) {
    echo $line;
}
?>

以上例程的输出类似于：

Written 47 bytes to temporary file.

This is the first line
And this is the second.

参见

  • SplFileObject
  • PHP input/output streams (for php://temp and php://memory)


User Contributed Notes 1 note

===============================================================================

Noting that when the tmp file exceeds memory limitations and is written to the
system temp directory, it is deleted upon completion of the script it was
initially created in. At least that is what I have seen and wanted to document
for others since it wasn't clear.
