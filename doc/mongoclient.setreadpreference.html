
MongoClient::setReadPreference

(PECL mongo >=1.3.0)

MongoClient::setReadPreference — 为该连接设置读取选项

说明

public bool MongoClient::setReadPreference ( string $read_preference [, array
$tags ] )

参数

read_preference

    The read preference mode: MongoClient::RP_PRIMARY,
    MongoClient::RP_PRIMARY_PREFERRED, MongoClient::RP_SECONDARY,
    MongoClient::RP_SECONDARY_PREFERRED, or MongoClient::RP_NEAREST.

tags

    An array of zero or more tag sets, where each tag set is itself an array of
    criteria used to match tags on replica set members.

返回值

Returns TRUE on success, or FALSE otherwise.

错误／异常

Emits E_WARNING if either parameter is invalid, or if one or more tag sets are
provided with the MongoClient::RP_PRIMARY read preference mode.

范例

Example #1 MongoClient::setReadPreference() 标签集数组语法的例子

<?php

$m = new MongoClient();

// 首选最近的 "east" 数据中心的服务器，也用于报告，
// 失败时调用 "west" 数据中心的服务器
$m->setReadPreference(MongoClient::RP_NEAREST, array(
    array('dc' => 'east', 'use' => 'reporting'),
    array('dc' => 'west'),
));
?>

参见

  • 读取选修的文档。

