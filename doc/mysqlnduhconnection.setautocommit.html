
MysqlndUhConnection::setAutocommit

(PECL mysqlnd-uh >= 1.0.1-alpha, PHP >= 5.4.0)

MysqlndUhConnection::setAutocommit — Turns on or off auto-committing database
modifications

说明

public bool MysqlndUhConnection::setAutocommit ( mysqlnd_connection $connection
, int $mode )

Turns on or off auto-committing database modifications

参数

connection

    Mysqlnd connection handle. Do not modify!

mode

    Whether to turn on auto-commit or not.

返回值

Returns TRUE on success. Otherwise, returns FALSE

范例

Example #1 MysqlndUhConnection::setAutocommit() example

<?php
class proxy extends MysqlndUhConnection {
 public function setAutocommit($res, $mode) {
  printf("%s(%s)\n", __METHOD__, var_export(func_get_args(), true));
  $ret = parent::setAutocommit($res, $mode);
  printf("%s returns %s\n", __METHOD__, var_export($ret, true));
  return $ret;
 }
}
mysqlnd_uh_set_connection_proxy(new proxy());
$mysqli = new mysqli("localhost", "root", "", "test");
$mysqli->autocommit(false);
$mysqli->autocommit(true);
?>

以上例程会输出：

proxy::setAutocommit(array (
  0 => NULL,
  1 => 0,
))
proxy::setAutocommit returns true
proxy::setAutocommit(array (
  0 => NULL,
  1 => 1,
))
proxy::setAutocommit returns true

参见

  • mysqlnd_uh_set_connection_proxy() - Installs a proxy for mysqlnd
    connections
  • mysqli_autocommit() - 打开或关闭本次数据库连接的自动命令提交事务模式

