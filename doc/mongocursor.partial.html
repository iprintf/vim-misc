
MongoCursor::partial

(PECL mongo >=1.2.0)

MongoCursor::partial — If this query should fetch partial results from mongos
if a shard is down

说明

public MongoCursor MongoCursor::partial ([ bool $okay = true ] )

This option allows mongos to send partial query results if a shard is
unreachable. This is only applicable when running a sharded MongoDB cluster and
connecting to a mongos.

If a shard goes down and a query needs to be sent to that shard, mongos will
return the results (if any) from shards it already contacted, then an error
message that it could not reach the shard (a MongoCursorException in PHP). If
you would like to get whatever results mongos can provide and no exception, you
can use this method. Note that this means that you won't have an indication
that a shard is down in your query response.

This has no effect on the query if all shards are reachable. This flag was
implemented in MongoDB version 1.7.5, so will only work with that version and
higher.

参数

okay

    If receiving partial results is okay.

返回值

Returns this cursor.

错误／异常

Throws MongoCursorException if this cursor has started iterating.

