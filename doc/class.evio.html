
The EvIo class

(PECL ev >= 0.2.0)

简介

EvIo watchers check whether a file descriptor(or socket, or a stream castable
to numeric file descriptor) is readable or writable in each iteration of the
event loop, or, more precisely, when reading would not block the process and
writing would at least be able to write some data. This behaviour is called
level-triggering because events are kept receiving as long as the condition
persists. To stop receiving events just stop the watcher.

The number of read and/or write event watchers per fd is unlimited. Setting all
file descriptors to non-blocking mode is also usually a good idea(but not
required).

Another thing to watch out for is that it is quite easy to receive false
readiness notifications, i.e. the callback might be called with Ev::READ but a
subsequent read() will actually block because there is no data. It is very easy
to get into this situation. Thus it is best to always use non-blocking I/O: An
extra read() returning EAGAIN (or similar) is far preferable to a program
hanging until some data arrives.

If for some reason it is impossible to run the fd in non-blocking mode, then
separately re-test whether a file descriptor is really ready. Some people
additionally use SIGALRM and an interval timer, just to be sure thry won't
block infinitely.

Always consider using non-blocking mode.

类摘要

EvIo extends EvWatcher {
/* 属性 */
public $fd ;
public $events ;
/* 继承的属性 */
public $is_active ;
public $data ;
public $is_pending ;
public $priority ;
/* 方法 */
public __construct ( mixed $fd , int $events , callable $callback [, mixed
$data [, int $priority ]] )
final public static EvIo createStopped ( mixed $fd , int $events , callable
$callback [, mixed $data = NULL [, int $priority = 0 ]] )
public void set ( mixed $fd , int $events )
/* 继承的方法 */
public int EvWatcher::clear ( void )
abstract public EvWatcher::__construct ( void )
public void EvWatcher::feed ( int $revents )
public EvLoop EvWatcher::getLoop ( void )
public void EvWatcher::invoke ( int $revents )
public bool EvWatcher::keepalive ([ bool $value ] )
public void EvWatcher::setCallback ( callable $callback )
public void EvWatcher::start ( void )
public void EvWatcher::stop ( void )
}

属性

fd

events

Table of Contents

  • EvIo::__construct — Constructs EvIo watcher object
  • EvIo::createStopped — Create stopped EvIo watcher object
  • EvIo::set — Configures the watcher

