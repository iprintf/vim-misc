
streamWrapper::stream_lock

(PHP 5, PHP 7)

streamWrapper::stream_lock — Advisory file locking

说明

public bool streamWrapper::stream_lock ( int $operation )

This method is called in response to flock(), when file_put_contents() (when
flags contains LOCK_EX), stream_set_blocking() and when closing the stream (
LOCK_UN).

参数

operation

    operation is one of the following:
      □ LOCK_SH to acquire a shared lock (reader).
      □ LOCK_EX to acquire an exclusive lock (writer).
      □ LOCK_UN to release a lock (shared or exclusive).
      □ LOCK_NB if you don't want flock() to block while locking. (not
        supported on Windows)

返回值

成功时返回 TRUE，或者在失败时返回 FALSE。

错误／异常

Emits E_WARNING if call to this method fails (i.e. not implemented).

参见

  • stream_set_blocking() - 为资源流设置阻塞或者阻塞模式
  • flock() - 轻便的咨询文件锁定

