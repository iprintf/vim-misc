
MongoDB\Driver\Manager::__construct

(mongodb >=1.0.0)

MongoDB\Driver\Manager::__construct — Create new MongoDB Manager

说明

final public MongoDB\Driver\Manager::__construct ( string $uri [, array
$options [, array $driverOptions ]] )

Constructs a new MongoDB\Driver\Manager object with the specified options.

参数

uri

    A » mongodb:// connection URI:

    mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]

    The uri is a URL, and hence, anything that is a special URL character needs
    to be URL encoded. This is particularly something to take into account for
    the password, as that is likely to have characters such as % in it.

options

    » Connection string options.

        Note:

        Specifying options via the options argument will overwrite any options
        with the same name in the uri argument.

driverOptions

    Any driver-specific options not included in MongoDB connection string
    specification.

错误／异常

  • Throws MongoDB\Driver\Exception\InvalidArgumentException on argument
    parsing errors.
  • Throws MongoDB\Driver\Exception\RuntimeException if the uri format is
    invalid

范例

Example #1 MongoDB\Driver\Manager::__construct() basic examples

Connecting to standalone MongoDB node:

<?php

$manager = new MongoDB\Driver\Manager("mongodb://localhost:27017");

?>

Connecting to a replica set:

<?php

$manager = new MongoDB\Driver\Manager("mongodb://
rs1.example.com,rs2.example.com/?replicaSet=myReplicaSet");

?>

Connecting to a sharded cluster (i.e. one or more mongos instances):

<?php

$manager = new MongoDB\Driver\Manager("mongodb://
mongos1.example.com,mongos2.example.com/");

?>

Connecting to MongoDB with authentication credentials for a particular user and
database:

<?php

$manager = new MongoDB\Driver\Manager("mongodb://
myusername:mypassword@localhost:27017/mydatabase");

?>

Connecting to MongoDB with authentication credentials for a particular user and
database, with the special characters @ and % in the password. The password
being used is Hell@Peop%e.

<?php

$manager = new MongoDB\Driver\Manager("mongodb://
giant:Hell%40Peop%25e@localhost:27017/mydatabase");

?>

Connecting to MongoDB with SSL and a certificate:

<?php

$manager = new MongoDB\Driver\Manager(
    "mongodb://username:password@aws-us-east-1-portal.xx.dblayer.com:28071/
admin?ssl=true",
    [],
    ["cafile" => "/full/path/to/cert"]
);
?>

参见

  • » MongoDB Connection String Format

