
zip_entry_filesize

(PHP 4 >= 4.1.0, PHP 5 >= 5.2.0, PHP 7, PECL zip >= 1.0.0)

zip_entry_filesize — 检索目录实体的实际大小

说明

int zip_entry_filesize ( resource $zip_entry )

返回指定目录实体的实际大小。

参数

zip_entry

    由函数zip_read() 返回的目录实体。

返回值

返回该目录实体的大小。

参见

  • zip_open() - 打开ZIP存档文件
  • zip_read() - 读取ZIP存档文件中下一项


User Contributed Notes 1 note

===============================================================================

Simple function that return total size of files in archive.
May be useful for check for zip bombs.

<?php

function get_zip_originalsize($filename) {
    $size = 0;
    $resource = zip_open($filename);
    while ($dir_resource = zip_read($resource)) {
        $size += zip_entry_filesize($dir_resource);
    }
    zip_close($resource);

    return $size;
}

$size = get_zip_originalsize('file.zip');
echo "original size: $size bytes\n";

?>
