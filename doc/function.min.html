
min

(PHP 4, PHP 5, PHP 7)

min — 找出最小值

说明

mixed min ( array $values )
mixed min ( mixed $value1 , mixed $value2 [, mixed $... ] )

如果仅有一个参数且为数组，min() 返回该数组中最小的值。如果给出了两个或更多参数,
min() 会返回这些值中最小的一个。

    Note:

    PHP 会将非数值的 string 当成 0，但如果这个正是最小的数值则仍然会返回一个字
    符串。如果多个参数都求值为 0 且是最小值，min() 会返回按字母表顺序最小的字符
    串，如果其中没有字符串的话，则返回数值的 0。

参数

values

    包含值的数组。

value1

    Any comparable value.

value2

    Any comparable value.

...

    Any comparable value.

返回值

min() 返回参数中数值最小的。

范例

Example #1 min() 用法的例子

<?php
echo min(2, 3, 1, 6, 7);  // 1
echo min(array(2, 4, 5)); // 2

echo min(0, 'hello');     // 0
echo min('hello', 0);     // hello
echo min('hello', -1);    // -1

// 对多个数组，min 从左向右比较。
// 因此在本例中：2 == 2，但 4 < 5
$val = min(array(2, 4, 8), array(2, 5, 1)); // array(2, 4, 8)

// 如果同时给出数组和非数组作为参数，则不可能返回数组，因为
// 数组被视为最大的
$val = min('string', array(2, 5, 7), 42);   // string
?>

参见

  • max() - 找出最大值
  • count() - 计算数组中的单元数目或对象中的属性个数


User Contributed Notes 16 notes

===============================================================================

min() (and max()) on DateTime objects compares them like dates (with timezone
info) and returns DateTime object.
<?php
$dt1 = new DateTime('2014-05-07 18:53', new DateTimeZone('Europe/Kiev'));
$dt2 = new DateTime('2014-05-07 16:53', new DateTimeZone('UTC'));
echo max($dt1,$dt2)->format(DateTime::RFC3339) . PHP_EOL; //
2014-05-07T16:53:00+00:00
echo min($dt1,$dt2)->format(DateTime::RFC3339) . PHP_EOL; //
2014-05-07T18:53:00+03:00
?>

It works at least 5.3.3-7+squeeze17
===============================================================================

A function that returns the lowest integer that is not 0.
<?php
/* like min(), but casts to int and ignores 0 */
function min_not_null(Array $values) {
    return min(array_diff(array_map('intval', $values), array(0)));
}
?>
===============================================================================

> NEVER EVER use this function with boolean variables !!!
> Or you'll get something like this: min(true, 1, -2) == true;

> Just because of:
> min(true, 1, -2) == min(min(true,1), -2) == min(true, -2) == true;

It is possible to use it with booleans, there is is just one thing, which you
need to keep in mind, when evaluating using the non strict comparison (==)
anyting that is not bool false, 0 or NULL is consideret true eg.:
(5 == true) = true;
(0 == true) = false;
true is also actually anything else then 0, false and null. However when true
is converted to a string or interger true == 1, therefore when sorting true =
1. But if true is the maximum number bool true is returned. so to be sure, if
you only want to match if true is the max number remember to use the strict
comparison operater ===
===============================================================================

A way to bound a integer between two values is:

function bound($x, $min, $max)
{
     return min(max($x, $min), $max);
}

which is the same as:

$tmp = $x;
if($tmp < $min)
{
    $tmp = $min;
}
if($tmp > $max)
{
     $tmp = $max;
}
$y = $tmp;

So if you wanted to bound an integer between 1 and 12 for example:

Input:
$x = 0;
echo bound(0, 1, 12).'<br />';
$x = 1;
echo bound($x, 1, 12).'<br />';
$x = 6;
echo bound($x, 1, 12).'<br />';
$x = 12;
echo bound($x, 1, 12).'<br />';
$x = 13;
echo bound($x, 1, 12).'<br />';

Output:
1
1
6
12
12
===============================================================================

I've modified the bugfree min-version to ignore NULL values (else it returns
0).

<?php
function min_mod () {
  $args = func_get_args();

  if (!count($args[0])) return false;
  else {
    $min = false;
    foreach ($args[0] AS $value) {
      if (is_numeric($value)) {
        $curval = floatval($value);
        if ($curval < $min || $min === false) $min = $curval;
      }
    }
  }

  return $min;  
}
?>
===============================================================================

Regarding boolean parameters in min() and max():

(a) If any of your parameters is boolean, max and min will cast the rest of
them to boolean to do the comparison.
(b) true > false
(c) However, max and min will return the actual parameter value that wins the
comparison (not the cast).

Here's some test cases to illustrate:

1.  max(true,100)=true
2.  max(true,0)=true
3.  max(100,true)=100
4.  max(false,100)=100
5.  max(100,false)=100
6.  min(true,100)=true
7.  min(true,0)=0
8.  min(100,true)=100
9.  min(false,100)=false
10. min(100,false)=false
11. min(true,false)=false
12. max(true,false)=true
===============================================================================

If NAN is the first argument to min(), the second argument will always be
returned.

If NAN is the second argument, NAN will always be returned.

The relationship is the same but inverted for max().

<?php
// \n's skipped for brevity
print max(0,NAN);
print max(NAN,0);
print min(0,NAN);
print min(NAN,0);
?>

Returns:
0
NAN
NAN
0
===============================================================================

I tested this with max(), but I suppose it applies to min() too: If you are
working with numbers, then you can use:

    $a = ($b < $c) ? $b : $c;

which is somewhat faster (roughly 16%) than

    $a = min($b, $c);

I tested this on several loops using integers and floats, over 1 million
iterations.

I'm running PHP 4.3.1 as a module for Apache 1.3.27.
===============================================================================

Be very careful when your array contains both strings and numbers. This code
works strange (even though explainable) way:
var_dump(max('25.1.1', '222', '99'));
var_dump(max('2.1.1', '222', '99'));
===============================================================================

NEVER EVER use this function with boolean variables !!!
Or you'll get something like this: min(true, 1, -2) == true;

Just because of:
min(true, 1, -2) == min(min(true,1), -2) == min(true, -2) == true;

You are warned !
===============================================================================

Here is function can find min by array key

<?php
function min_by_key($arr, $key){
    $min = array();
    foreach ($arr as $val) {
        if (!isset($val[$key]) and is_array($val)) {
            $min2 = min_by_key($val, $key);
            $min[$min2] = 1;
        } elseif (!isset($val[$key]) and !is_array($val)) {
            return false;
        } elseif (isset($val[$key])) {
            $min[$val[$key]] = 1;
        }
    }
    return min( array_keys($min) );
}
?>
===============================================================================

If you want min to return zero (0) when comparing to a string, try this:

<?php
min(3,4,";");  // ";"
min(0,min(3,4,";")) // 0
?>
===============================================================================

A condensed version (and possible application) of returning an array of array
keys containing the same minimum value:

<?php
// data
$min_keys = array();
$player_score_totals = array(
'player1' => 300,
'player2' => 301,
'player3' => 302,
'player4' => 301,
...
);

// search for array keys with min() value
foreach($player_score_totals as $playerid => $score)
    if($score == min($player_score_totals)) array_push($min_keys, $playerid);

print_r($min_keys);
?>
===============================================================================

When using a variable with an array that has a list of numbers, put just the
variable in min(). Don't use integer index's. Seems pretty straight forward
now, but I wasn't used to just putting down the variable for an array in
functions.

<?php
  $list = array(9,5,4,6,2,7);
  echo min($list); // display 2
?>
===============================================================================

min() can be used to cap values at a specific value. For instance, if you're
grading papers and someone has some extra credit, but  that shouldn't make it
to the final score:

$pts_possible = 50;
$score = 55;

// Percent will equal 1 if $score/$pts_possible is greater than 1
$percent = min($score/$pts_possible,1);
===============================================================================

empty strings '' will also return false or 0, so if you have something like

$test = array('', 1, 5, 8, 44, 22);

'' will be returned as the lowest value

if you only want to get the lowest number, you'll have to resort to the old
fashioned loop

// default minimum value
$minVal = 100;
foreach ($test as $value) {
if (is_numeric($value) && $value < $minVal) {
$minVal = $value;
}
