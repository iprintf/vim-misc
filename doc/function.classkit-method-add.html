
classkit_method_add

(PECL classkit >= 0.1)

classkit_method_add — Dynamically adds a new method to a given class

说明

bool classkit_method_add ( string $classname , string $methodname , string
$args , string $code [, int $flags = CLASSKIT_ACC_PUBLIC ] )
Warning

此函数是实验性的。此函数的表象，包括名称及其相关文档都可能在未来的 PHP 发布版本
中未通知就被修改。使用本函数风险自担。

参数

classname

    The class to which this method will be added

methodname

    The name of the method to add

args

    Comma-delimited list of arguments for the newly-created method

code

    The code to be evaluated when methodname is called

flags

    The type of method to create, can be CLASSKIT_ACC_PUBLIC,
    CLASSKIT_ACC_PROTECTED or CLASSKIT_ACC_PRIVATE

        Note:

        This parameter is only used as of PHP 5, because, prior to this, all
        methods were public.

返回值

成功时返回 TRUE，或者在失败时返回 FALSE。

范例

Example #1 classkit_method_add() example

<?php
class Example {
    function foo() {
        echo "foo!\n";
    }
}

// create an Example object
$e = new Example();

// Add a new public method
classkit_method_add(
    'Example',
    'add',
    '$num1, $num2',
    'return $num1 + $num2;',
    CLASSKIT_ACC_PUBLIC
);

// add 12 + 4
echo $e->add(12, 4);
?>

以上例程会输出：

16

参见

  • classkit_method_copy() - Copies a method from class to another
  • classkit_method_redefine() - Dynamically changes the code of the given
    method
  • classkit_method_remove() - Dynamically removes the given method
  • classkit_method_rename() - Dynamically changes the name of the given method
  • create_function() - Create an anonymous (lambda-style) function


User Contributed Notes 1 note

===============================================================================

If you creates methods by using classkit_method_add(), they are not visible in
get_class_methods().

class A
{   
       public function foo()
       {
            return "foo!\n";
       }
}

classkit_method_redefine('A','bar','','return "bar !\n";',CLASSKIT_ACC_PUBLIC);

print_r(get_class_methods('A'));
// writes only "foo"
