
The EvPrepare class

(PECL ev >= 0.2.0)

简介

EvPrepare and EvCheck watchers are usually used in pairs. EvPrepare watchers
get invoked before the process blocks, EvCheck afterwards.

It is not allowed to call EvLoop::run() or similar methods or functions that
enter the current event loop from either EvPrepare or EvCheck watchers. Other
loops than the current one are fine, however. The rationale behind this is that
one don't need to check for recursion in those watchers, i.e. the sequence will
always be: EvPrepare -> blocking -> EvCheck , so having a watcher of each kind
they will always be called in pairs bracketing the blocking call.

The main purpose is to integrate other event mechanisms into libev and their
use is somewhat advanced. They could be used, for example, to track variable
changes, implement custom watchers, integrate net-snmp or a coroutine library
and lots more. They are also occasionally useful to cache some data and want to
flush it before blocking.

It is recommended to give EvCheck watchers highest( Ev::MAXPRI ) priority, to
ensure that they are being run before any other watchers after the poll (this
doesn’t matter for EvPrepare watchers).

Also, EvCheck watchers should not activate/feed events. While libev fully
supports this, they might get executed before other EvCheck watchers did their
job.

类摘要

EvPrepare extends EvWatcher {
/* 继承的属性 */
public $is_active ;
public $data ;
public $is_pending ;
public $priority ;
/* 方法 */
public __construct ( string $callback [, string $data [, string $priority ]] )
final public static EvPrepare createStopped ( callable $callback [, mixed $data
= NULL [, int $priority = 0 ]] )
/* 继承的方法 */
public int EvWatcher::clear ( void )
abstract public EvWatcher::__construct ( void )
public void EvWatcher::feed ( int $revents )
public EvLoop EvWatcher::getLoop ( void )
public void EvWatcher::invoke ( int $revents )
public bool EvWatcher::keepalive ([ bool $value ] )
public void EvWatcher::setCallback ( callable $callback )
public void EvWatcher::start ( void )
public void EvWatcher::stop ( void )
}

Table of Contents

  • EvPrepare::__construct — Constructs EvPrepare watcher object
  • EvPrepare::createStopped — Creates a stopped instance of EvPrepare watcher

