
MongoClient::getReadPreference

(PECL mongo >=1.3.0)

MongoClient::getReadPreference — 获取此连接的读取首选项

说明

public array MongoClient::getReadPreference ( void )

参数

此函数没有参数。

返回值

This function returns an array describing the read preference. The array
contains the values type for the string read preference mode (corresponding to
the MongoClient constants), and tagsets containing a list of all tag set
criteria. If no tag sets were specified, tagsets will not be present in the
array.

更新日志

版本                                    说明
      返回的值修改为兼容 MongoClient::setReadPreference()。 type 的值从数组改成
1.3.3 字符串，删除了 type_string，并且 tagsets 现在以键值表示的标签而不是冒号分
      隔的字符串。

范例

Example #1 MongoClient::getReadPreference() 返回值例子

<?php

$m = new MongoClient();
$m->setReadPreference(MongoClient::RP_SECONDARY, array(
    array('dc' => 'east', 'use' => 'reporting'),
    array('dc' => 'west'),
    array(),
));
var_dump($m->getReadPreference());
?>

以上例程会输出：

array(2) {
  ["type"]=>
  string(9) "secondary"
  ["tagsets"]=>
  array(3) {
    [0]=>
    array(2) {
      ["dc"]=>
      string(4) "east"
      ["use"]=>
      string(9) "reporting"
    }
    [1]=>
    array(1) {
      ["dc"]=>
      string(7) "west"
    }
    [2]=>
    array(0) {
    }
  }
}

参见

  • 读取首选项的文档。

